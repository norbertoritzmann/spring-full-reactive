<!DOCTYPE HTML>
<html>
<head>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>
	<div class="container">
		<input type="text" id="symbol" />
		<button id="add-button">Add</button>
		<div id="container"></div>
	</div>
	<script>
		var source;

		function connect() {
			source = new EventSource( getSubscriptionUrl( $("#symbol").val() ) );

			source.onopen = function(event) {
				$("#container").append('<div class="module_holder"><label>' + $("#symbol").val() + '</label> <div id="' + $("#symbol").val() + '" class="module_item"></div></div>');
			};

			source.onmessage = function(event) {
				var quote = JSON.parse(event.data);
				$("#" + quote.symbol).html(quote.price);
			};
		}

		function getSubscriptionUrl(symbol) {
			var protocol = window.location.protocol + "//";
			var host = window.location.host;
			var service = "/quotes/" + symbol;

			return protocol + host + service;
		}

		$(function() {

			$("#add-button").click(function() {
				connect();
				return false;
			});

		});
	</script>
</body>
</html>